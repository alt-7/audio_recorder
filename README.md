# üéô Audio Recording Service (Yii2 + Docker)

–°–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ PHP 8.2 (Yii2 Basic), PostgreSQL –∏ FFmpeg.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
* **–ó–∞–ø–∏—Å—å –∞—É–¥–∏–æ:** –ó–∞–≥—Ä—É–∑–∫–∞ Base64 –∞—É–¥–∏–æ–ø–æ—Ç–æ–∫–∞ (WebM/WAV/etc).
* **–û–±—Ä–∞–±–æ—Ç–∫–∞ (FFmpeg):**
   * –£–¥–∞–ª–µ–Ω–∏–µ —Ç–∏—à–∏–Ω—ã –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ.
   * –£–º–Ω–æ–µ —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ (`highpass`, `afftdn`).
   * –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–æ–º–∫–æ—Å—Ç–∏ (`loudnorm`).
   * –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ MP3 (VBR High Quality).
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   * Rate Limiting (–∑–∞—â–∏—Ç–∞ –æ—Ç DDOS).
   * –í–∞–ª–∏–¥–∞—Ü–∏—è MIME-—Ç–∏–ø–æ–≤, –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤, –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
   * API Key –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.
   * –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
   * –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** Swagger / OpenAPI.
* **–¢–µ—Å—Ç—ã:** Unit –∏ API (Codeception).

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
* Docker & Docker Compose

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
git clone https://github.com/alt-7/audio_recorder.git
cd project

# –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ —à–∞–±–ª–æ–Ω–∞
cp .env.example .env

# –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose up -d --build

*–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç `entrypoint.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:*
* *–£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Composer*
* *–í—ã–ø–æ–ª–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö*
* *–°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Swagger*

# –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose exec app sh

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
vendor/bin/codecept run

# –¢–æ–ª—å–∫–æ API —Ç–µ—Å—Ç—ã
vendor/bin/codecept run api

# –¢–æ–ª—å–∫–æ Unit —Ç–µ—Å—Ç—ã
vendor/bin/codecept run unit

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞ –±–∞–∑–∞ –æ—á–∏—Å—Ç–∏—Ç—Å—è)
php yii user/init

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger JSON
php yii swagger/generate

# –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
php yii cache:flush-all


# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: üëâ http://localhost:8000/swagger/doc
# –î–æ—Å—Ç—É–ø—ã:
API Key: secret-api-key-123 (–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ X-Api-Key)# audio_recorder
